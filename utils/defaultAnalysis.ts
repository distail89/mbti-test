/**
 * API 키가 없을 때 사용하는 기본 분석 템플릿
 */
import { AllScoresResult } from './calculateScores'

export function generateDefaultAnalysis(result: AllScoresResult): string {
  const { mbtiType, chartData, details } = result

  // 각 차원의 강도 계산
  const getIntensity = (percentage: number): string => {
    if (percentage >= 81) return '매우 강한'
    if (percentage >= 71) return '강한'
    if (percentage >= 61) return '중간 정도의'
    if (percentage >= 51) return '약한'
    return '매우 약한'
  }

  const eiIntensity = getIntensity(chartData.EI.E || 0)
  const snIntensity = getIntensity(chartData.SN.N || 0)
  const tfIntensity = getIntensity(chartData.TF.T || 0)
  const jpIntensity = getIntensity(chartData.JP.J || 0)
  const atIntensity = getIntensity(chartData.AT.A || 0)

  return `# 당신의 성격 유형: ${mbtiType} 🌟

## 한 줄 요약
"${mbtiType} 유형의 당신은 독특한 성격 특성을 가지고 있습니다."

---

## 📊 당신의 성격, 숫자로 보기

### E(외향성) ${chartData.EI.E?.toFixed(1)}% ←─●────→ I(내향성) ${chartData.EI.I?.toFixed(1)}%
**${eiIntensity} ${chartData.EI.E && chartData.EI.E >= 50 ? '외향형' : '내향형'}**

${chartData.EI.E && chartData.EI.E >= 50 
  ? '당신은 외부 세계와의 상호작용에서 에너지를 얻는 편입니다. 사람들과 어울리는 것을 즐기고, 활발한 소통을 선호합니다.'
  : '당신은 내면의 세계에서 에너지를 얻는 편입니다. 깊이 있는 사고와 혼자만의 시간을 소중히 여깁니다.'}

**이런 모습이 보여요:**
- ${chartData.EI.E && chartData.EI.E >= 50 ? '다양한 사람들과 폭넓게 관계를 맺는 것을 선호합니다' : '소수의 깊은 관계를 중시합니다'}
- ${chartData.EI.E && chartData.EI.E >= 50 ? '생각을 말로 표현하면서 정리하는 편입니다' : '충분히 생각한 후에 말하는 편입니다'}
- ${chartData.EI.E && chartData.EI.E >= 50 ? '활발한 환경에서 집중력이 높아집니다' : '조용한 환경에서 집중력이 높아집니다'}
- ${chartData.EI.E && chartData.EI.E >= 50 ? '즉흥적인 대화를 즐깁니다' : '계획된 대화를 선호합니다'}

---

### S(감각) ${chartData.SN.S?.toFixed(1)}% ←────●─→ N(직관) ${chartData.SN.N?.toFixed(1)}%
**${snIntensity} ${chartData.SN.N && chartData.SN.N >= 50 ? '직관형' : '감각형'}**

${chartData.SN.N && chartData.SN.N >= 50
  ? '당신은 미래의 가능성과 추상적인 개념에 관심이 많습니다. 패턴과 의미를 찾는 것을 즐깁니다.'
  : '당신은 현재의 사실과 구체적인 경험을 중시합니다. 실용적이고 현실적인 접근을 선호합니다.'}

**이런 모습이 보여요:**
- ${chartData.SN.N && chartData.SN.N >= 50 ? '아이디어와 가능성에 집중합니다' : '현실과 경험에 집중합니다'}
- ${chartData.SN.N && chartData.SN.N >= 50 ? '큰 그림을 먼저 봅니다' : '세부사항을 먼저 봅니다'}
- ${chartData.SN.N && chartData.SN.N >= 50 ? '직감을 신뢰합니다' : '검증된 방법을 신뢰합니다'}
- ${chartData.SN.N && chartData.SN.N >= 50 ? '새로운 관점을 추구합니다' : '확실한 방법을 선호합니다'}

---

### T(사고) ${chartData.TF.T?.toFixed(1)}% ←──●──→ F(감정) ${chartData.TF.F?.toFixed(1)}%
**${tfIntensity} ${chartData.TF.T && chartData.TF.T >= 50 ? '사고형' : '감정형'}**

${chartData.TF.T && chartData.TF.T >= 50
  ? '당신은 논리와 객관성을 중시합니다. 원칙과 일관성을 바탕으로 결정을 내립니다.'
  : '당신은 가치와 조화를 중시합니다. 사람들의 감정과 관계를 고려하여 결정을 내립니다.'}

**이런 모습이 보여요:**
- ${chartData.TF.T && chartData.TF.T >= 50 ? '객관적인 기준으로 판단합니다' : '사람의 감정을 고려합니다'}
- ${chartData.TF.T && chartData.TF.T >= 50 ? '진실을 직접적으로 말합니다' : '상대방의 감정을 배려합니다'}
- ${chartData.TF.T && chartData.TF.T >= 50 ? '효율성을 우선시합니다' : '조화를 우선시합니다'}
- ${chartData.TF.T && chartData.TF.T >= 50 ? '논리적 분석을 선호합니다' : '공감과 이해를 중시합니다'}

---

### J(판단) ${chartData.JP.J?.toFixed(1)}% ←────────●→ P(인식) ${chartData.JP.P?.toFixed(1)}%
**${jpIntensity} ${chartData.JP.J && chartData.JP.J >= 50 ? '판단형' : '인식형'}**

${chartData.JP.J && chartData.JP.J >= 50
  ? '당신은 계획과 체계를 선호합니다. 결정을 빠르게 내리고 일정을 관리하는 것을 좋아합니다.'
  : '당신은 유연성과 자유를 선호합니다. 여러 가능성을 열어두고 상황에 맞게 대응합니다.'}

**이런 모습이 보여요:**
- ${chartData.JP.J && chartData.JP.J >= 50 ? '미리 계획을 세웁니다' : '상황에 맞게 대응합니다'}
- ${chartData.JP.J && chartData.JP.J >= 50 ? '일정을 지키는 것을 중요시합니다' : '유연한 일정을 선호합니다'}
- ${chartData.JP.J && chartData.JP.J >= 50 ? '결정을 빠르게 내립니다' : '여러 옵션을 고려합니다'}
- ${chartData.JP.J && chartData.JP.J >= 50 ? '정리정돈을 좋아합니다' : '자유로운 환경을 선호합니다'}

---

### A(주장적) ${chartData.AT.A?.toFixed(1)}% ←──●───→ T(신중한) ${chartData.AT.T?.toFixed(1)}%
**${atIntensity} ${chartData.AT.A && chartData.AT.A >= 50 ? '주장적' : '신중한'}**

${chartData.AT.A && chartData.AT.A >= 50
  ? '당신은 자신감 있고 스트레스에 강한 편입니다. 실수를 빠르게 털어내고 앞으로 나아갑니다.'
  : '당신은 신중하고 완벽을 추구하는 편입니다. 자기비판적이지만 높은 기준을 유지합니다.'}

**이런 모습이 보여요:**
- ${chartData.AT.A && chartData.AT.A >= 50 ? '자신의 선택에 확신이 있습니다' : '선택 후에도 계속 고민합니다'}
- ${chartData.AT.A && chartData.AT.A >= 50 ? '비판에 흔들리지 않습니다' : '타인의 평가에 민감합니다'}
- ${chartData.AT.A && chartData.AT.A >= 50 ? '완벽하지 않아도 시작합니다' : '충분히 준비한 후 시작합니다'}
- ${chartData.AT.A && chartData.AT.A >= 50 ? '스트레스를 잘 관리합니다' : '스트레스에 예민할 수 있습니다'}

---

## 🎯 종합 분석

### 당신의 슈퍼파워 ✨

**1. 독특한 관점**
당신의 ${mbtiType} 유형은 특별한 강점을 가지고 있습니다. 각 차원의 조합이 만들어내는 독특한 성격 특성을 활용하세요.

**2. 균형 잡힌 사고**
다양한 차원에서 균형을 이루고 있어, 상황에 맞게 유연하게 대응할 수 있는 능력이 있습니다.

**3. 깊이 있는 이해**
자신의 성격을 이해하고 있다는 것은 큰 장점입니다. 이를 바탕으로 성장할 수 있습니다.

**4. 적응력**
각 차원의 비율이 균형잡혀 있어, 다양한 상황에 적응할 수 있는 능력이 있습니다.

**5. 자기 인식**
자신의 성격을 객관적으로 파악하고 있어, 개선점을 찾고 발전할 수 있습니다.

### 이것만 주의하세요! ⚠️

**1. 극단적 선택 피하기**
어느 한쪽으로 치우치지 않도록 균형을 유지하는 것이 중요합니다.

**팁:** 반대 성향의 장점도 배워보세요.

**2. 타인과의 차이 이해하기**
다른 유형의 사람들과 소통할 때 서로의 차이를 이해하는 것이 중요합니다.

**팁:** 상대방의 관점에서 생각해보는 연습을 하세요.

**3. 스트레스 관리**
성격 특성에 따라 스트레스를 받는 상황이 다를 수 있습니다.

**팁:** 자신에게 맞는 스트레스 해소 방법을 찾아보세요.

---

## 💼 당신에게 딱 맞는 직업

### 완전 찰떡 👍
당신에게 필요한 키워드: **창의성**, **자율성**, **의미**

- **창의 분야**: 디자이너, 작가, 예술가
- **인문 분야**: 상담사, 교육자, 연구원
- **기술 분야**: 개발자, 분석가, 기획자
- **서비스 분야**: 컨설턴트, 코치, 전문가

**왜 잘 맞아요?**
당신의 성격 특성이 이러한 분야에서 발휘될 수 있습니다. 자신의 강점을 살릴 수 있는 환경을 찾아보세요.

### 좀 힘들 수도... 📉

- 과도한 규칙과 제약이 있는 환경
- 창의성을 발휘할 기회가 없는 일
- 인간관계가 복잡한 환경
- 단조롭고 반복적인 업무

**왜 안 맞아요?**
당신의 성격 특성과 맞지 않는 환경에서는 스트레스를 받을 수 있습니다.

---

## 🌱 레벨업 미션

### 단기 미션 (1개월)
**레벨 1**: 자신의 성격 특성을 일기에 기록해보기
**레벨 2**: 반대 성향의 장점을 하나씩 실천해보기
**레벨 3**: 새로운 경험에 도전해보기

### 장기 성장 방향
1. **자기 이해**: 자신의 성격을 더 깊이 이해하기
2. **대인관계**: 다양한 유형의 사람들과 소통하기
3. **성장 마인드**: 지속적인 학습과 발전
4. **균형**: 모든 차원에서 균형 잡힌 성장

---

## 🤝 사람들과 잘 지내는 법

### 당신의 매력 포인트
- **독특한 관점**: 남들과 다른 시각을 제공합니다
- **깊이 있는 사고**: 표면적인 것이 아닌 본질을 봅니다
- **균형**: 다양한 특성을 조화롭게 가지고 있습니다

### 궁합 TIP

**환상의 짝꿍 🍰**
- **보완적 유형**: 당신의 약점을 보완해주는 유형과 잘 맞습니다
- **당신(${mbtiType}) = 깊이**, **그들 = 넓이**

**티격태격하지만 배울 점 있는 사이 💥**
- **반대 성향**: 당신과 다른 유형과는 충돌할 수 있지만 서로 배울 점이 많습니다
- **당신한테 배워요**: 당신의 독특한 관점
- **이들한테 배워요**: 그들의 다른 접근 방식

**함께하면 시너지 📚**
- **비슷한 유형**: 깊이 있는 대화를 나눌 수 있습니다
- **보완적 유형**: 서로의 강점을 살릴 수 있습니다

### 대인관계 꿀팁
1. **공감하기**: 상대방의 입장에서 생각해보기
2. **소통**: 자신의 생각을 명확히 전달하기
3. **경계**: 자신의 한계를 인정하고 존중받기
4. **다양성**: 다른 유형의 사람들과의 차이를 이해하기

---

## 🎁 마지막 한 마디

당신의 성격은 독특하고 소중합니다. 🌟

${mbtiType} 유형의 당신은 각 차원의 조합으로 만들어진 특별한 개인입니다. 
이 검사 결과는 당신을 이해하는 하나의 도구일 뿐입니다. 
진짜 중요한 것은 당신이 어떤 사람인지, 그리고 어떤 사람이 되고 싶은지입니다.

*"당신은 이미 충분히 특별합니다"* - 오늘부터의 당신
`
}
